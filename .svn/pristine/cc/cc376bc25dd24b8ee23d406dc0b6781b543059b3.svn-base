package cn.edu.tsinghua.thss.tsmart.modeling.bip.parts;

import org.eclipse.gef.EditPolicy;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;

import cn.edu.tsinghua.thss.tsmart.modeling.bip.models.CompoundTypeModel;
import cn.edu.tsinghua.thss.tsmart.modeling.bip.policies.CompoundChildEditPolicy;
import cn.edu.tsinghua.thss.tsmart.modeling.bip.policies.DeleteCompoundEditPolicy;
import cn.edu.tsinghua.thss.tsmart.modeling.ui.dialog.EditCompoundTypeDialog;


public class CompoundTypeEditPart extends ContainerEditPart {
    @Override
    protected void createEditPolicies() {
        installEditPolicy(EditPolicy.LAYOUT_ROLE, new CompoundChildEditPolicy());
        installEditPolicy(EditPolicy.COMPONENT_ROLE, new DeleteCompoundEditPolicy());
    }

    @Override
    protected void performDoubleClick() {
        CompoundTypeModel model = (CompoundTypeModel) getModel();
        Shell shell = Display.getDefault().getActiveShell();
        if (shell != null) {
            EditCompoundTypeDialog dialog =
                            new EditCompoundTypeDialog(shell, model, model.getParent());
            dialog.setBlockOnOpen(true);
            dialog.open();
        }
    }
}
